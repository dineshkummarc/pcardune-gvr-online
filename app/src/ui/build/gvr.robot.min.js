gvr.robot={};gvr.robot.NORTH="NORTH";gvr.robot.WEST="WEST";gvr.robot.SOUTH="SOUTH";gvr.robot.EAST="EAST";gvr.robot.LEFT_OF={};gvr.robot.LEFT_OF[gvr.robot.NORTH]=gvr.robot.WEST;gvr.robot.LEFT_OF[gvr.robot.WEST]=gvr.robot.SOUTH;gvr.robot.LEFT_OF[gvr.robot.SOUTH]=gvr.robot.EAST;gvr.robot.LEFT_OF[gvr.robot.EAST]=gvr.robot.NORTH;gvr.robot.OFFSET={NORTH:{x:0,y:1},SOUTH:{x:0,y:-1},EAST:{x:1,y:0},WEST:{x:-1,y:0}};gvr.robot.Robot=Class.extend({init:function(a){this.x=1;this.y=1;this.world=a;this.direction=gvr.robot.NORTH;this.beepers=0;this.on=true},move:function move(){if(this.front_is_blocked()){throw new Error("Ran into a wall")}var a=gvr.robot.OFFSET[this.direction];this.x+=a.x;this.y+=a.y},turnleft:function turnleft(){this.direction=gvr.robot.LEFT_OF[this.direction]},pickbeeper:function pickbeeper(){var a=this.world.getBeepers(this.x,this.y);if(a>0){this.beepers+=1;this.world.setBeepers(this.x,this.y,a-1)}else{throw new Error("No beepers to pick up.")}},putbeeper:function putbeeper(){if(this.beepers>0){this.beepers-=1;this.world.setBeepers(this.x,this.y,this.world.getBeepers(this.x,this.y)+1)}else{throw new Error("No beepers in beeper bag.")}},turnoff:function turnoff(){this.on=false;gvr.alert("Robot turned off")},facing_north:function facing_north(){return this.direction===gvr.robot.NORTH},facing_south:function facing_south(){return this.direction===gvr.robot.SOUTH},facing_east:function facing_east(){return this.direction===gvr.robot.EAST},facing_west:function facing_west(){return this.direction===gvr.robot.WEST},any_beepers_in_beeper_bag:function any_beepers_in_beeper_bag(){return this.beepers>0},next_to_a_beeper:function next_to_a_beeper(){return this.world.getBeepers(this.x,this.y)>0},front_is_blocked:function front_is_blocked(){return this.world.getWall(this.x,this.y,this.direction)},left_is_blocked:function left_is_blocked(){return this.world.getWall(this.x,this.y,gvr.robot.LEFT_OF[this.direction])},right_is_blocked:function right_is_blocked(){var a=gvr.robot.LEFT_OF[gvr.robot.LEFT_OF[gvr.robot.LEFT_OF[this.direction]]];return this.world.getWall(this.x,this.y,a)},not_facing_north:function(){return !this.facing_north()},not_facing_south:function(){return !this.facing_south()},not_facing_east:function(){return !this.facing_east()},not_facing_west:function(){return !this.facing_west()},no_beepers_in_beeper_bag:function no_beepers_in_beeper_bag(){return !this.any_beepers_in_beeper_bag()},not_next_to_a_beeper:function not_next_to_a_beeper(){return !this.next_to_a_beeper()},front_is_clear:function front_is_clear(){return !this.front_is_blocked()},left_is_clear:function left_is_clear(){return !this.left_is_blocked()},right_is_clear:function right_is_clear(){return !this.right_is_blocked()}});