gvr.world.parser={};gvr.world.parser.SPEC=/^\s*(\w+)\s+(\d+)\s+(\d+)\s+([NESW])\s+(\d+)?\s*$/;gvr.world.parser.BEEPERS=/^\s*(\w+)\s+(\d+)\s+(\d+)\s+(\d+)\s*$/;gvr.world.parser.EMPTY_LINE=gvr.lang.parser.EMPTY_LINE;gvr.world.parser.Parser=Class.extend({init:function(a,b){this.lines=a;this.world=b},parse:function(){var a,b,d,g;for(var e=0;e<this.lines.length;e++){var j=gvr.lang.parser.removeComment(this.lines[e]);if(j.match(gvr.world.parser.EMPTY_LINE)){continue}var c=j.match(gvr.world.parser.SPEC);if(c){a=c[1].toUpperCase();b=parseInt(c[2],10);d=parseInt(c[3],10);var h={N:"NORTH",S:"SOUTH",E:"EAST",W:"WEST"}[c[4]];g=parseInt(c[5],10)||1;if(a==="ROBOT"){this.world.robot.x=b;this.world.robot.y=d;this.world.robot.beepers=g;this.world.robot.direction=h}if(a==="WALL"){this.world.setWall(b,d,h,g)}}var f=j.match(gvr.world.parser.BEEPERS);if(f){a=f[1].toUpperCase();if(a=="BEEPERS"){b=parseInt(f[2],10);d=parseInt(f[3],10);g=parseInt(f[4],10);this.world.setBeepers(b,d,g)}}}}});gvr.world.parser.newParser=function(a,b){return new gvr.world.parser.Parser(a,b)};